{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marginal1\\\\Desktop\\\\react-stroyka\\\\client\\\\src\\\\components\\\\HeaderSearch\\\\HeaderSearch.tsx\",\n  _s = $RefreshSig$();\nimport { useRef, useState } from 'react';\nimport Dropdown from '../Dropdown/Dropdown';\nimport SearchIcon from '../../Icons/SearchIcon';\nimport { useDebounce } from '../../hooks/useDebounce';\nimport { useSearch } from '../../hooks/useSearch';\nimport { useCloseHandler } from '../../hooks/useCloseHandler';\nimport { useGetSearchedQuery } from '../../redux/injected/injectedSearched';\nimport style from './HeaderSearch.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HeaderSearch = () => {\n  _s();\n  const [searchValue, setSearchValue] = useState('');\n  const [dropdown, setDropdown] = useState(false);\n  const [isFocused, setIsFocused] = useState(false);\n  const formRef = useRef(null);\n  const debounced = useDebounce(searchValue, 300);\n  const {\n    data = [],\n    isLoading,\n    isSuccess,\n    isError\n  } = useGetSearchedQuery({\n    value: debounced,\n    count: 4\n  }, {\n    skip: debounced.length < 3\n  });\n  useCloseHandler(debounced, dropdown, setDropdown, formRef);\n  const {\n    redirect,\n    onClickSearchBtn,\n    onClickHistoryItem\n  } = useSearch({\n    isFocused,\n    debounced,\n    searchValue,\n    setSearchValue,\n    setDropdown,\n    formRef\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: style['form'],\n    ref: formRef,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: style['form__input'],\n      onChange: e => setSearchValue(e.target.value),\n      value: searchValue,\n      onFocus: () => setIsFocused(true),\n      onBlur: () => setIsFocused(false),\n      onKeyDown: e => redirect(e),\n      onClick: () => setDropdown(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: style['form__btn'],\n      onClick: onClickSearchBtn,\n      type: \"button\",\n      children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), dropdown && /*#__PURE__*/_jsxDEV(Dropdown, {\n      data: data,\n      isLoading: isLoading,\n      isSuccess: isSuccess,\n      isError: isError,\n      setValue: onClickHistoryItem,\n      searchValue: debounced\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n_s(HeaderSearch, \"AUid92Nz5KjPmg3P+b7hZFA382I=\", false, function () {\n  return [useDebounce, useGetSearchedQuery, useCloseHandler, useSearch];\n});\n_c = HeaderSearch;\nexport default HeaderSearch;\nvar _c;\n$RefreshReg$(_c, \"HeaderSearch\");","map":{"version":3,"names":["useRef","useState","Dropdown","SearchIcon","useDebounce","useSearch","useCloseHandler","useGetSearchedQuery","style","HeaderSearch","searchValue","setSearchValue","dropdown","setDropdown","isFocused","setIsFocused","formRef","debounced","data","isLoading","isSuccess","isError","value","count","skip","length","redirect","onClickSearchBtn","onClickHistoryItem","e","target"],"sources":["C:/Users/Marginal1/Desktop/react-stroyka/client/src/components/HeaderSearch/HeaderSearch.tsx"],"sourcesContent":["import { FC, useRef, useState } from 'react';\r\nimport Dropdown from '../Dropdown/Dropdown';\r\nimport SearchIcon from '../../Icons/SearchIcon';\r\nimport { useDebounce } from '../../hooks/useDebounce';\r\nimport { useSearch } from '../../hooks/useSearch';\r\nimport { useCloseHandler } from '../../hooks/useCloseHandler';\r\nimport { useGetSearchedQuery } from '../../redux/injected/injectedSearched';\r\nimport style from './HeaderSearch.module.scss';\r\n\r\nconst HeaderSearch: FC = () => {\r\n\r\n    const [searchValue, setSearchValue] = useState<string>('');\r\n    const [dropdown, setDropdown] = useState<boolean>(false);\r\n    const [isFocused, setIsFocused] = useState<boolean>(false);\r\n\r\n    const formRef = useRef<HTMLFormElement>(null);\r\n\r\n    const debounced = useDebounce(searchValue, 300);\r\n\r\n    const { data = [], isLoading, isSuccess, isError } = useGetSearchedQuery({ value: debounced, count: 4 }, {\r\n        skip: debounced.length < 3\r\n    });\r\n\r\n    useCloseHandler(debounced, dropdown, setDropdown, formRef);\r\n\r\n    const { redirect, onClickSearchBtn, onClickHistoryItem } = useSearch({\r\n        isFocused,\r\n        debounced,\r\n        searchValue,\r\n        setSearchValue,\r\n        setDropdown,\r\n        formRef\r\n    });\r\n\r\n    return (\r\n        <form className={style['form']} ref={formRef}>\r\n            <input\r\n                className={style['form__input']}\r\n                onChange={(e) => setSearchValue(e.target.value)}\r\n                value={searchValue}\r\n                onFocus={() => setIsFocused(true)}\r\n                onBlur={() => setIsFocused(false)}\r\n                onKeyDown={(e) => redirect(e)}\r\n                onClick={() => setDropdown(true)}\r\n            />\r\n            <button\r\n                className={style['form__btn']}\r\n                onClick={onClickSearchBtn}\r\n                type='button'>\r\n                <SearchIcon />\r\n            </button>\r\n            {\r\n                dropdown && <Dropdown\r\n                    data={data}\r\n                    isLoading={isLoading}\r\n                    isSuccess={isSuccess}\r\n                    isError={isError}\r\n                    setValue={onClickHistoryItem}\r\n                    searchValue={debounced} />\r\n            }\r\n        </form >\r\n    );\r\n}\r\n\r\nexport default HeaderSearch;"],"mappings":";;AAAA,SAAaA,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC5C,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,eAAe,QAAQ,6BAA6B;AAC7D,SAASC,mBAAmB,QAAQ,uCAAuC;AAC3E,OAAOC,KAAK,MAAM,4BAA4B;AAAC;AAE/C,MAAMC,YAAgB,GAAG,MAAM;EAAA;EAE3B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAS,EAAE,CAAC;EAC1D,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAU,KAAK,CAAC;EACxD,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAU,KAAK,CAAC;EAE1D,MAAMe,OAAO,GAAGhB,MAAM,CAAkB,IAAI,CAAC;EAE7C,MAAMiB,SAAS,GAAGb,WAAW,CAACM,WAAW,EAAE,GAAG,CAAC;EAE/C,MAAM;IAAEQ,IAAI,GAAG,EAAE;IAAEC,SAAS;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGd,mBAAmB,CAAC;IAAEe,KAAK,EAAEL,SAAS;IAAEM,KAAK,EAAE;EAAE,CAAC,EAAE;IACrGC,IAAI,EAAEP,SAAS,CAACQ,MAAM,GAAG;EAC7B,CAAC,CAAC;EAEFnB,eAAe,CAACW,SAAS,EAAEL,QAAQ,EAAEC,WAAW,EAAEG,OAAO,CAAC;EAE1D,MAAM;IAAEU,QAAQ;IAAEC,gBAAgB;IAAEC;EAAmB,CAAC,GAAGvB,SAAS,CAAC;IACjES,SAAS;IACTG,SAAS;IACTP,WAAW;IACXC,cAAc;IACdE,WAAW;IACXG;EACJ,CAAC,CAAC;EAEF,oBACI;IAAM,SAAS,EAAER,KAAK,CAAC,MAAM,CAAE;IAAC,GAAG,EAAEQ,OAAQ;IAAA,wBACzC;MACI,SAAS,EAAER,KAAK,CAAC,aAAa,CAAE;MAChC,QAAQ,EAAGqB,CAAC,IAAKlB,cAAc,CAACkB,CAAC,CAACC,MAAM,CAACR,KAAK,CAAE;MAChD,KAAK,EAAEZ,WAAY;MACnB,OAAO,EAAE,MAAMK,YAAY,CAAC,IAAI,CAAE;MAClC,MAAM,EAAE,MAAMA,YAAY,CAAC,KAAK,CAAE;MAClC,SAAS,EAAGc,CAAC,IAAKH,QAAQ,CAACG,CAAC,CAAE;MAC9B,OAAO,EAAE,MAAMhB,WAAW,CAAC,IAAI;IAAE;MAAA;MAAA;MAAA;IAAA,QACnC,eACF;MACI,SAAS,EAAEL,KAAK,CAAC,WAAW,CAAE;MAC9B,OAAO,EAAEmB,gBAAiB;MAC1B,IAAI,EAAC,QAAQ;MAAA,uBACb,QAAC,UAAU;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA,QACT,EAELf,QAAQ,iBAAI,QAAC,QAAQ;MACjB,IAAI,EAAEM,IAAK;MACX,SAAS,EAAEC,SAAU;MACrB,SAAS,EAAEC,SAAU;MACrB,OAAO,EAAEC,OAAQ;MACjB,QAAQ,EAAEO,kBAAmB;MAC7B,WAAW,EAAEX;IAAU;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QAE9B;AAEhB,CAAC;AAAA,GArDKR,YAAgB;EAAA,QAQAL,WAAW,EAEwBG,mBAAmB,EAIxED,eAAe,EAE4CD,SAAS;AAAA;AAAA,KAhBlEI,YAAgB;AAuDtB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}