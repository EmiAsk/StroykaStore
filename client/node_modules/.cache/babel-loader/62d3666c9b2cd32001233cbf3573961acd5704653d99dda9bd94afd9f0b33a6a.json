{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useGetCartQuery, useAddCartItemMutation, useChangeCartItemMutation } from '../redux/injected/injectedCart';\nimport { useErrorHandler } from './useErrorHandler';\nexport const useAddProduct = () => {\n  _s();\n  const {\n    data = [],\n    error\n  } = useGetCartQuery();\n  const [addCartItem, addStatues] = useAddCartItemMutation();\n  const addErrorHandlerData = {\n    error: addStatues.error,\n    isError: addStatues.isError,\n    isClient: true,\n    errorMessage: 'Произошла ошибка при попытке добавления товара в корзину'\n  };\n  useErrorHandler({\n    ...addErrorHandlerData\n  });\n  const [changeCartItem, changeStatuses] = useChangeCartItemMutation();\n  const changeErrorHandlerData = {\n    error: changeStatuses.error,\n    isError: changeStatuses.isError,\n    isClient: true,\n    errorMessage: 'Произошла ошибка при попытке увеличения колличества товара'\n  };\n  useErrorHandler({\n    ...changeErrorHandlerData\n  });\n  const addProduct = async item => {\n    if (data.find(obj => obj.fixId === item.fixId)) {\n      const existingCount = data.find(obj => obj.fixId === item.fixId);\n      item.count += existingCount.count;\n      item.id = +existingCount.id;\n      await changeCartItem(item);\n    } else {\n      await addCartItem(item);\n    }\n  };\n  return addProduct;\n};\n_s(useAddProduct, \"lsrgPv/B6zSvk7c8d21mPYniy20=\", false, function () {\n  return [useGetCartQuery, useAddCartItemMutation, useErrorHandler, useChangeCartItemMutation, useErrorHandler];\n});","map":{"version":3,"names":["useGetCartQuery","useAddCartItemMutation","useChangeCartItemMutation","useErrorHandler","useAddProduct","data","error","addCartItem","addStatues","addErrorHandlerData","isError","isClient","errorMessage","changeCartItem","changeStatuses","changeErrorHandlerData","addProduct","item","find","obj","fixId","existingCount","count","id"],"sources":["C:/Users/Marginal1/Desktop/react-stroyka/client/src/hooks/useAddProduct.ts"],"sourcesContent":["import { TransmittedData } from '../@types/models';\r\nimport { useGetCartQuery, useAddCartItemMutation, useChangeCartItemMutation } from '../redux/injected/injectedCart';\r\nimport { useErrorHandler } from './useErrorHandler';\r\n\r\nexport const useAddProduct = () => {\r\n\r\n    const { data = [], error } = useGetCartQuery();\r\n\r\n    const [addCartItem, addStatues] = useAddCartItemMutation();\r\n\r\n    const addErrorHandlerData = {\r\n        error: addStatues.error,\r\n        isError: addStatues.isError,\r\n        isClient: true,\r\n        errorMessage: 'Произошла ошибка при попытке добавления товара в корзину', \r\n    }\r\n\r\n    useErrorHandler({ ...addErrorHandlerData })\r\n\r\n    const [changeCartItem, changeStatuses] = useChangeCartItemMutation();\r\n\r\n    const changeErrorHandlerData = {\r\n        error: changeStatuses.error,\r\n        isError: changeStatuses.isError,\r\n        isClient: true,\r\n        errorMessage: 'Произошла ошибка при попытке увеличения колличества товара',\r\n    }\r\n\r\n    useErrorHandler({ ...changeErrorHandlerData })\r\n\r\n    const addProduct = async (item: TransmittedData) => {\r\n\r\n        if (data.find((obj) => obj.fixId === item.fixId)) {\r\n            const existingCount = data.find((obj) => obj.fixId === item.fixId)\r\n            item.count += existingCount!.count\r\n            item.id = +existingCount!.id\r\n            await changeCartItem(item)\r\n        } else {\r\n            await addCartItem(item)\r\n        }\r\n    }\r\n\r\n    return addProduct\r\n}"],"mappings":";AACA,SAASA,eAAe,EAAEC,sBAAsB,EAAEC,yBAAyB,QAAQ,gCAAgC;AACnH,SAASC,eAAe,QAAQ,mBAAmB;AAEnD,OAAO,MAAMC,aAAa,GAAG,MAAM;EAAA;EAE/B,MAAM;IAAEC,IAAI,GAAG,EAAE;IAAEC;EAAM,CAAC,GAAGN,eAAe,EAAE;EAE9C,MAAM,CAACO,WAAW,EAAEC,UAAU,CAAC,GAAGP,sBAAsB,EAAE;EAE1D,MAAMQ,mBAAmB,GAAG;IACxBH,KAAK,EAAEE,UAAU,CAACF,KAAK;IACvBI,OAAO,EAAEF,UAAU,CAACE,OAAO;IAC3BC,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE;EAClB,CAAC;EAEDT,eAAe,CAAC;IAAE,GAAGM;EAAoB,CAAC,CAAC;EAE3C,MAAM,CAACI,cAAc,EAAEC,cAAc,CAAC,GAAGZ,yBAAyB,EAAE;EAEpE,MAAMa,sBAAsB,GAAG;IAC3BT,KAAK,EAAEQ,cAAc,CAACR,KAAK;IAC3BI,OAAO,EAAEI,cAAc,CAACJ,OAAO;IAC/BC,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE;EAClB,CAAC;EAEDT,eAAe,CAAC;IAAE,GAAGY;EAAuB,CAAC,CAAC;EAE9C,MAAMC,UAAU,GAAG,MAAOC,IAAqB,IAAK;IAEhD,IAAIZ,IAAI,CAACa,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,KAAK,KAAKH,IAAI,CAACG,KAAK,CAAC,EAAE;MAC9C,MAAMC,aAAa,GAAGhB,IAAI,CAACa,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,KAAK,KAAKH,IAAI,CAACG,KAAK,CAAC;MAClEH,IAAI,CAACK,KAAK,IAAID,aAAa,CAAEC,KAAK;MAClCL,IAAI,CAACM,EAAE,GAAG,CAACF,aAAa,CAAEE,EAAE;MAC5B,MAAMV,cAAc,CAACI,IAAI,CAAC;IAC9B,CAAC,MAAM;MACH,MAAMV,WAAW,CAACU,IAAI,CAAC;IAC3B;EACJ,CAAC;EAED,OAAOD,UAAU;AACrB,CAAC;AAAA,GAvCYZ,aAAa;EAAA,QAEOJ,eAAe,EAEVC,sBAAsB,EASxDE,eAAe,EAE0BD,yBAAyB,EASlEC,eAAe;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}