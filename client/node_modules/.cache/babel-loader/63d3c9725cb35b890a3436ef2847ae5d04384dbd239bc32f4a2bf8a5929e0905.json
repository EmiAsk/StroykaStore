{"ast":null,"code":"import { createApi, fetchBaseQuery, retry } from '@reduxjs/toolkit/query/react';\nconst baseQuery = fetchBaseQuery({\n  baseUrl: '/',\n  prepareHeaders: (headers, _ref) => {\n    let {\n      getState\n    } = _ref;\n    const token = getState().auth.token;\n\n    // If we have a token set in state, let's assume that we should be passing it.\n    if (token) {\n      headers.set('authorization', `Bearer ${token}`);\n    }\n    return headers;\n  }\n});\nconst url = `http://127.0.0.1/api/`;\nexport const stroykaApi = createApi({\n  reducerPath: 'stroykaApi',\n  tagTypes: ['Cart', 'Orders', 'Category', 'Discount', 'PopularProducts', 'Product', 'Reviews', 'Searched', 'SimilarProducts'],\n  baseQuery: retry(fetchBaseQuery({\n    baseUrl: url\n  }), {\n    maxRetries: 1\n  }),\n  refetchOnFocus: true,\n  endpoints: () => ({})\n});\nexport const {} = stroykaApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","retry","baseQuery","baseUrl","prepareHeaders","headers","getState","token","auth","set","url","stroykaApi","reducerPath","tagTypes","maxRetries","refetchOnFocus","endpoints"],"sources":["C:/Users/Marginal1/Desktop/react-stroyka/client/src/redux/stroyka.api.ts"],"sourcesContent":["import { createApi, fetchBaseQuery, retry } from '@reduxjs/toolkit/query/react';\r\n\r\nconst baseQuery = fetchBaseQuery({\r\n    baseUrl: '/',\r\n    prepareHeaders: (headers, { getState }) => {\r\n      const token = (getState() as RootState).auth.token\r\n  \r\n      // If we have a token set in state, let's assume that we should be passing it.\r\n      if (token) {\r\n        headers.set('authorization', `Bearer ${token}`)\r\n      }\r\n  \r\n      return headers\r\n    },\r\n  })\r\n\r\nconst url = `http://127.0.0.1/api/`;\r\n\r\nexport const stroykaApi = createApi({\r\n    reducerPath: 'stroykaApi',\r\n    tagTypes: ['Cart', 'Orders', 'Category', 'Discount', 'PopularProducts', 'Product', 'Reviews', 'Searched', 'SimilarProducts'],\r\n    baseQuery: retry(fetchBaseQuery({ baseUrl: url }), { maxRetries: 1 }),\r\n    refetchOnFocus: true,\r\n    endpoints: () => ({}),\r\n})\r\n\r\nexport const { } = stroykaApi;\r\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,cAAc,EAAEC,KAAK,QAAQ,8BAA8B;AAE/E,MAAMC,SAAS,GAAGF,cAAc,CAAC;EAC7BG,OAAO,EAAE,GAAG;EACZC,cAAc,EAAE,CAACC,OAAO,WAAmB;IAAA,IAAjB;MAAEC;IAAS,CAAC;IACpC,MAAMC,KAAK,GAAID,QAAQ,EAAE,CAAeE,IAAI,CAACD,KAAK;;IAElD;IACA,IAAIA,KAAK,EAAE;MACTF,OAAO,CAACI,GAAG,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IACjD;IAEA,OAAOF,OAAO;EAChB;AACF,CAAC,CAAC;AAEJ,MAAMK,GAAG,GAAI,uBAAsB;AAEnC,OAAO,MAAMC,UAAU,GAAGZ,SAAS,CAAC;EAChCa,WAAW,EAAE,YAAY;EACzBC,QAAQ,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,iBAAiB,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,iBAAiB,CAAC;EAC5HX,SAAS,EAAED,KAAK,CAACD,cAAc,CAAC;IAAEG,OAAO,EAAEO;EAAI,CAAC,CAAC,EAAE;IAAEI,UAAU,EAAE;EAAE,CAAC,CAAC;EACrEC,cAAc,EAAE,IAAI;EACpBC,SAAS,EAAE,OAAO,CAAC,CAAC;AACxB,CAAC,CAAC;AAEF,OAAO,MAAM,CAAE,CAAC,GAAGL,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}