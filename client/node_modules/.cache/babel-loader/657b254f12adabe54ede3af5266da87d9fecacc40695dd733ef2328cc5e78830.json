{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Marginal1\\\\Desktop\\\\react-stroyka\\\\client\\\\src\\\\components\\\\Card\\\\Card.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport style from './Card.module.scss';\nimport clsx from 'clsx';\nimport { useAddCartItemMutation, useChangeCartItemMutation, useGetCartQuery } from '../../redux/injected/injectedCart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Card = _ref => {\n  _s();\n  let {\n    img,\n    title,\n    price,\n    discount,\n    horizontal = false,\n    discountAmount,\n    fixId,\n    provider\n  } = _ref;\n  const currentVievPrice = Math.round(price - price / 100 * discountAmount);\n  const currentPrice = price - price / 100 * discountAmount;\n  const truthCheck = discount === 'true';\n  const finalPrice = truthCheck ? currentVievPrice : price;\n  const obj = {\n    img,\n    title,\n    finalPrice,\n    fixId,\n    provider,\n    count: 0,\n    id: 0\n  };\n  const {\n    data = []\n  } = useGetCartQuery();\n  const [addCartItem] = useAddCartItemMutation();\n  const [changeCartItem] = useChangeCartItemMutation();\n  const addProduct = async item => {\n    if (data.find(obj => obj.fixId === item.fixId)) {\n      const currentCount = data.find(obj => obj.fixId === item.fixId);\n      item.count += currentCount.count + 1;\n      item.id = currentCount.id;\n      // item.finalPrice = finalPrice * item.count\n      await changeCartItem(item);\n    } else {\n      item.count += 1;\n      await addCartItem(item);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: style['grid-item'],\n    children: /*#__PURE__*/_jsxDEV(\"article\", {\n      className: horizontal ? style['grid-item__content--h'] : style['grid-item__content'],\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: horizontal ? style['grid-item__image--h'] : style['grid-item__image'],\n        src: img,\n        alt: \"product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style['grid-item__main'],\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: style['grid-item__title'],\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: style['grid-item__price'],\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: style['grid-item__price--current'],\n            children: [truthCheck ? currentVievPrice : price, \" \\u20BD\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), truthCheck && /*#__PURE__*/_jsxDEV(\"s\", {\n            className: style['grid-item__price--past'],\n            children: price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 43\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: clsx('btn-reset', style['grid-item__btn']),\n          onClick: () => addProduct(obj),\n          children: \"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), truthCheck && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: style['grid-item__discount'],\n        children: [\"-\", discountAmount, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 35\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(Card, \"GSDGE42Aatg/rf5JtITEowU4veA=\", false, function () {\n  return [useGetCartQuery, useAddCartItemMutation, useChangeCartItemMutation];\n});\n_c = Card;\nexport default Card;\nvar _c;\n$RefreshReg$(_c, \"Card\");","map":{"version":3,"names":["React","style","clsx","useAddCartItemMutation","useChangeCartItemMutation","useGetCartQuery","Card","img","title","price","discount","horizontal","discountAmount","fixId","provider","currentVievPrice","Math","round","currentPrice","truthCheck","finalPrice","obj","count","id","data","addCartItem","changeCartItem","addProduct","item","find","currentCount"],"sources":["C:/Users/Marginal1/Desktop/react-stroyka/client/src/components/Card/Card.tsx"],"sourcesContent":["import React, { FC } from 'react';\r\nimport style from './Card.module.scss';\r\nimport clsx from 'clsx';\r\nimport { TCard, TCartCard } from '../../@types/globalTypes';\r\nimport { useAddCartItemMutation, useChangeCartItemMutation, useGetCartQuery } from '../../redux/injected/injectedCart';\r\n\r\ntype testType = {\r\n    id: number;\r\n    fixId: number;\r\n    img: string;\r\n    title: string;\r\n    provider: string;\r\n    rating: number;\r\n    price: number;\r\n    type: number;\r\n    discount: string;\r\n    discountAmount?: number;\r\n    horizontal?: boolean;\r\n}\r\n\r\nconst Card: FC<testType> = ({ img, title, price, discount, horizontal = false, discountAmount, fixId, provider }) => {\r\n\r\n    const currentVievPrice: number = Math.round(((price - price / 100 * discountAmount!)));\r\n    const currentPrice: number = ((price - price / 100 * discountAmount!));\r\n    const truthCheck: boolean = discount === 'true';\r\n    const finalPrice: number = truthCheck ? currentVievPrice : price\r\n\r\n    const obj = { img, title, finalPrice, fixId, provider, count: 0, id: 0 };\r\n\r\n\r\n    const { data = [] } = useGetCartQuery();\r\n\r\n    const [addCartItem] = useAddCartItemMutation();\r\n\r\n    const [changeCartItem] = useChangeCartItemMutation();\r\n\r\n    const addProduct = async (item: any) => {\r\n        if (data.find((obj: any) => obj.fixId === item.fixId)) {\r\n            const currentCount = data.find((obj: TCartCard) => obj.fixId === item.fixId)\r\n            item.count += currentCount!.count + 1\r\n            item.id = currentCount!.id\r\n            // item.finalPrice = finalPrice * item.count\r\n            await changeCartItem(item)\r\n        } else {\r\n            item.count += 1\r\n            await addCartItem(item)\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <li className={style['grid-item']}>\r\n            <article className={horizontal ? style['grid-item__content--h'] : style['grid-item__content']}>\r\n                <img className={horizontal ? style['grid-item__image--h'] : style['grid-item__image']} src={img} alt='product' />\r\n                <div className={style['grid-item__main']}>\r\n                    <p className={style['grid-item__title']}>{title}</p>\r\n                    <div className={style['grid-item__price']}>\r\n                        <p className={style['grid-item__price--current']}>\r\n                            {truthCheck ? currentVievPrice : price} ₽\r\n                        </p>\r\n                        {\r\n                            truthCheck && <s className={style['grid-item__price--past']}>{price}</s>\r\n                        }\r\n                    </div>\r\n                    <button className={clsx('btn-reset', style['grid-item__btn'])} onClick={() => addProduct(obj)}>В корзину</button>\r\n                </div>\r\n                {\r\n                    truthCheck && <span className={style['grid-item__discount']}>-{discountAmount}%</span>\r\n                }\r\n            </article>\r\n        </li>\r\n    );\r\n}\r\n\r\n\r\n\r\nexport default Card;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}